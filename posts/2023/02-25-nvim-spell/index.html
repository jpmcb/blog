<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>NeoVim: Using the spellchecker | John McBride</title><meta name=keywords content><meta name=description content="I know.
Any sane person&rsquo;s editor already has spellchecking built in. And enabled by default. But I could never leave my beloved Neovim (and all the muscle memory I&rsquo;ve built) just to spell things correctly! That&rsquo;s why I became a programmer dammit! Who needs to know how to spell correctly when I can have single character variable names! Besides. We have tools. Isn&rsquo;t that what computers are for!? Automate the boring stuff!"><meta name=author content><link rel=canonical href=https://johncodes.com/posts/2023/02-25-nvim-spell/><link crossorigin=anonymous href=/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://johncodes.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://johncodes.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://johncodes.com/favicon-32x32.png><link rel=apple-touch-icon href=https://johncodes.com/apple-touch-icon.png><link rel=mask-icon href=https://johncodes.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="NeoVim: Using the spellchecker"><meta property="og:description" content="I know.
Any sane person&rsquo;s editor already has spellchecking built in. And enabled by default. But I could never leave my beloved Neovim (and all the muscle memory I&rsquo;ve built) just to spell things correctly! That&rsquo;s why I became a programmer dammit! Who needs to know how to spell correctly when I can have single character variable names! Besides. We have tools. Isn&rsquo;t that what computers are for!? Automate the boring stuff!"><meta property="og:type" content="article"><meta property="og:url" content="https://johncodes.com/posts/2023/02-25-nvim-spell/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-25T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-25T00:00:00+00:00"><meta property="og:site_name" content="John-McBride"><meta name=twitter:card content="summary"><meta name=twitter:title content="NeoVim: Using the spellchecker"><meta name=twitter:description content="I know.
Any sane person&rsquo;s editor already has spellchecking built in. And enabled by default. But I could never leave my beloved Neovim (and all the muscle memory I&rsquo;ve built) just to spell things correctly! That&rsquo;s why I became a programmer dammit! Who needs to know how to spell correctly when I can have single character variable names! Besides. We have tools. Isn&rsquo;t that what computers are for!? Automate the boring stuff!"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://johncodes.com/posts/"},{"@type":"ListItem","position":2,"name":"NeoVim: Using the spellchecker","item":"https://johncodes.com/posts/2023/02-25-nvim-spell/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"NeoVim: Using the spellchecker","name":"NeoVim: Using the spellchecker","description":"I know.\nAny sane person\u0026rsquo;s editor already has spellchecking built in. And enabled by default. But I could never leave my beloved Neovim (and all the muscle memory I\u0026rsquo;ve built) just to spell things correctly! That\u0026rsquo;s why I became a programmer dammit! Who needs to know how to spell correctly when I can have single character variable names! Besides. We have tools. Isn\u0026rsquo;t that what computers are for!? Automate the boring stuff!","keywords":[],"articleBody":" I know.\nAny sane person’s editor already has spellchecking built in. And enabled by default. But I could never leave my beloved Neovim (and all the muscle memory I’ve built) just to spell things correctly! That’s why I became a programmer dammit! Who needs to know how to spell correctly when I can have single character variable names! Besides. We have tools. Isn’t that what computers are for!? Automate the boring stuff! (like spelling and grammar).\nThankfully, the long awaited spell integration features have landed in the NeoVim APIs. While spell has been around forever (or at least as long as Vim has been), only recently have the NeoVim Lua APIs been able to take advantage of it. Now, by default, without plugins, nvim can make spelling suggestions and treesitter can do the right things with misspellings in the syntax highlighting, code parsing, and search queries. Or in other words, spell is waaay nicer to use since it’ll ignore code (but not other stuff).\nThis has already greatly increased my productivity when writing. If you know anything about me (or have had the pleasure of working with me and seeing my egregious spelling mistakes), you know that I can not spell. My reliance on good spell checker tools has really evolved into a dependency. But no longer! Now, I can continue to convince myself that nvim is a superior editor because it finally has spell checking.\nIn all seriousness, shout out to the NeoVim community and maintainers for getting this feature in!! It’s already been a huge value add and saved me on several occasion from pushing an embarrassing commit message.\nEnabling it Make sure you have a new-ish version of NeoVim. I’m running with a newer nightly build, but the latest official release should do the trick.\n❯ nvim --version NVIM v0.9.0-dev-699+gc752c8536 In your nvim configuration files, you’ll want to set the one of the following options:\nFor those who’ve ascended to using Lua: vim.opt.spelllang = 'en_us' vim.opt.spell = true Or good, ol trusty Vimscript: set spelllang=en_us set spell Alternatively, you can use the command prompt to enable spell in your current session:\n:setlocal spell spelllang=en_us Note that en_us is US English. But there are tons of supported languages out of the box: en_gb for Great Britian English, de for German, ru for Russian, and more.\nNow, you should see words that are misspelled underlined! Nice!!\nUsing it There are 3 default key-mappings my workflow has revolved around for fixing spelling mistakes when I’m writing.\nFinding words: ]s will go to the next misspelled word.\n[s will go to the previous misspelled word.\nEasy as that! These default key-mappings are designed to be composable (or heck, modified in any way you like - this is NeoVim after all!) so spend some time thinking about what re-mappings, key bindings, or macros might make sense for you and your workflow.\nFixing words: When the cursor is under a word that is misspelled, z= will open the list of suggestions. Typically, the first suggestion is almost always right. Hit 1 and in the prompt to indicate you want to take the first suggestion. And the word has been fixed!\nThere’s also\n:spellr which is the “spell repeater”. It repeats the replacement done by z= for all matched misspellings in the current window. So, if there’s a word you frequently misspell, using :spellr is a quick and easy one stop shop for fixing all the misspellings of that type.\nAdding words to the spellfile If you’ve typed a word that doesn’t appear in the default dictionary, but is spelled correctly, you can easily add it yourself to the internal spell list. Especially in programming docs, there are lots of words not loaded into the default dictionary. With your cursor under the correctly spelled word that is underlined as misspelled, use the zg mapping to mark the word as a “good” word.\nDoing this, you’ll notice that NeoVim will automatically create a spell/ directory in the runtime path (typically under ~/.config/nvim). And in that directory, you’ll find two files:\n~/.config/nvim/ |-- spell | |-- en.utf-8.add | |-- en.utf-8.add.spl The .add file is a list of words you’ve added. For example, my .add file has tech words like “Kubernetes” which don’t typically appear in the default English dictionary.\nThe .spl file is a compiled binary “spellfile”. And it’s what is used to actually make suggestions and crawl the dictionary graph. Creating spellfiles is … rather involved. But, for most people, simply using zg to mark “good” words gets you 99% of the way there.\nAs with most things NeoVim, there are excellent docs and APIs for using the spell interface: https://neovim.io/doc/user/spell.html Especially if you plan to generate your own spellfiles or programmatically modify text via the spell APIs, these doc resources are a must read!\nIf you found this blog post valuable, comment below, consider subscribing to future posts via RSS or buying me a coffee via GitHub sponsors. Your support means the world to me!!\n","wordCount":"832","inLanguage":"en","datePublished":"2023-02-25T00:00:00Z","dateModified":"2023-02-25T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://johncodes.com/posts/2023/02-25-nvim-spell/"},"publisher":{"@type":"Organization","name":"John McBride","logo":{"@type":"ImageObject","url":"https://johncodes.com/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://johncodes.com/ accesskey=h title="John McBride (Alt + H)">John McBride</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://johncodes.com/about title=About><span>About</span></a></li><li><a href=https://johncodes.com/archives title="Blog archive"><span>Blog archive</span></a></li><li><a href=https://johncodes.com/talks/ title=Talks><span>Talks</span></a></li><li><a href=https://johncodes.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>NeoVim: Using the spellchecker</h1><div class=post-meta><span title='2023-02-25 00:00:00 +0000 UTC'>February 25, 2023</span></div></header><div class=post-content><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/KoL-2WTlr04 style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><hr><p><em>I know.</em></p><p>Any <em>sane</em> person&rsquo;s editor already has spellchecking built in.
And enabled by default.
But I could never leave my beloved Neovim
(and all the muscle memory I&rsquo;ve built) just to spell things correctly!
That&rsquo;s why I became a programmer dammit! Who needs to know how to spell correctly
when I can have single character variable names!
Besides. We have <em>tools</em>. Isn&rsquo;t that what computers are for!?
Automate the boring stuff! <em>(like spelling and grammar).</em></p><p>Thankfully, the long awaited <code>spell</code> integration features have landed in the NeoVim APIs.
While <code>spell</code> has been around forever (or at least as long as Vim has been),
<a href=https://github.com/neovim/neovim/pull/19419>only recently have the NeoVim Lua APIs</a>
been able to take advantage of it.
Now, by default, <em>without plugins</em>, nvim can make spelling suggestions and
treesitter can do the right things with misspellings in the
syntax highlighting, code parsing, and search queries.
Or in other words, <code>spell</code> is <em>waaay</em> nicer to use since it&rsquo;ll ignore code (but not other stuff).</p><p>This has already <em>greatly</em> increased my productivity when writing.
If you know anything about me (or have had the pleasure of working with me
and seeing my egregious spelling mistakes),
you know that I can <em>not</em> spell.
My reliance on good spell checker tools has really evolved into a dependency.
But no longer! Now, I can continue to convince myself that nvim
is a superior editor because it finally has <em>spell checking</em>.</p><p>In all seriousness, shout out to the NeoVim community and maintainers
for getting this feature in!! It&rsquo;s already been a huge value add
and saved me on <em>several</em> occasion from pushing an embarrassing commit message.</p><hr><h3 id=enabling-it>Enabling it<a hidden class=anchor aria-hidden=true href=#enabling-it>#</a></h3><p>Make sure you have a new-ish version of NeoVim.
I&rsquo;m running with a newer nightly build, but the latest official release should do the trick.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>❯ nvim --version
</span></span><span style=display:flex><span>NVIM v0.9.0-dev-699+gc752c8536
</span></span></code></pre></div><p>In your nvim configuration files, you&rsquo;ll want to set the one of the following options:</p><ul><li><em>For those who&rsquo;ve ascended to using Lua</em>:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>vim.opt.spelllang <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;en_us&#39;</span>
</span></span><span style=display:flex><span>vim.opt.spell <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><ul><li><em>Or good, ol trusty Vimscript</em>:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>spelllang</span>=<span style=color:#a6e22e>en_us</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>spell</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>Alternatively, you can use the command prompt to enable <code>spell</code> in your current session:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>:setlocal spell spelllang=en_us
</span></span></code></pre></div><p>Note that <code>en_us</code> is <em>US English</em>.
But there are <em>tons</em> of supported languages out of the box:
<code>en_gb</code> for Great Britian English,
<code>de</code> for German, <code>ru</code> for Russian, and more.</p><p>Now, you should see words that are misspelled underlined! Nice!!</p><h3 id=using-it>Using it<a hidden class=anchor aria-hidden=true href=#using-it>#</a></h3><p>There are 3 default key-mappings my workflow has revolved around
for fixing spelling mistakes when I&rsquo;m writing.</p><h4 id=finding-words>Finding words:<a hidden class=anchor aria-hidden=true href=#finding-words>#</a></h4><p><code>]s</code> will go to the <em>next</em> misspelled word.</p><p><code>[s</code> will go to the <em>previous</em> misspelled word.</p><p>Easy as that! These default key-mappings are designed to be composable
(or heck, modified in any way you like - this is NeoVim after all!)
so spend some time thinking about what re-mappings, key bindings,
or macros might make sense for you and your workflow.</p><h4 id=fixing-words>Fixing words:<a hidden class=anchor aria-hidden=true href=#fixing-words>#</a></h4><p>When the cursor is under a word that is misspelled,
<code>z=</code> will open the list of suggestions.
Typically, the first suggestion is almost always right.
Hit <code>1</code> and <code>&lt;enter></code> in the prompt to indicate you want to take the first suggestion.
And the word has been fixed!</p><p>There&rsquo;s also</p><pre tabindex=0><code>:spellr
</code></pre><p>which is the &ldquo;spell repeater&rdquo;. It repeats the replacement done by <code>z=</code>
for all matched misspellings in the current window.
So, if there&rsquo;s a word you <em>frequently</em> misspell, using <code>:spellr</code> is a quick and easy
one stop shop for fixing <em>all</em> the misspellings of that type.</p><h3 id=adding-words-to-the-spellfile>Adding words to the spellfile<a hidden class=anchor aria-hidden=true href=#adding-words-to-the-spellfile>#</a></h3><p>If you&rsquo;ve typed a word that doesn&rsquo;t appear in the default dictionary,
<em>but is spelled correctly</em>, you can easily add it yourself to the internal spell list.
Especially in programming docs, there are <em>lots</em> of words not loaded into the default dictionary.
With your cursor under the <em>correctly</em> spelled word that is underlined as misspelled,
use the <code>zg</code> mapping to mark the word as a &ldquo;good&rdquo; word.</p><p>Doing this, you&rsquo;ll notice that NeoVim will automatically create a <code>spell/</code> directory
in the runtime path (typically under <code>~/.config/nvim</code>).
And in that directory, you&rsquo;ll find two files:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>~/.config/nvim/
</span></span><span style=display:flex><span>  |-- spell
</span></span><span style=display:flex><span>  |    |-- en.utf-8.add
</span></span><span style=display:flex><span>  |    |-- en.utf-8.add.spl
</span></span></code></pre></div><p>The <code>.add</code> file is a list of words you&rsquo;ve added.
For example, my <code>.add</code> file has <em>tech</em> words like &ldquo;Kubernetes&rdquo;
which don&rsquo;t typically appear in the default English dictionary.</p><p>The <code>.spl</code> file is a compiled binary &ldquo;spellfile&rdquo;.
And it&rsquo;s what is used to actually make suggestions and crawl the dictionary graph.
Creating spellfiles is &mldr; <em>rather</em> involved.
But, for most people, simply using <code>zg</code> to mark &ldquo;good&rdquo; words gets you 99% of the way there.</p><hr><p>As with most things NeoVim,
there are <em>excellent</em> docs and APIs for using the spell interface: <a href=https://neovim.io/doc/user/spell.html>https://neovim.io/doc/user/spell.html</a>
Especially if you plan to generate your own spellfiles
or programmatically modify text via the spell APIs,
these doc resources are a must read!</p><hr><p>If you found this blog post valuable, comment below,
consider <a href=https://johncodes.com/index.xml>subscribing to future posts via RSS</a>
or <a href=https://github.com/sponsors/jpmcb>buying me a coffee via GitHub sponsors.</a>
Your support means the world to me!!</p><hr><script src=https://giscus.app/client.js data-repo=jpmcb/blog data-repo-id="MDEwOlJlcG9zaXRvcnkxMTYxODMyNjg=" data-category="Blog comments" data-category-id=DIC_kwDOBuzQ5M4CTbHW data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=dark_dimmed data-lang=en data-loading=lazy crossorigin=anonymous async></script></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://johncodes.com/>John McBride</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>