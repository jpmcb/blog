<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>On maintaining spf13/cobra | John McBride</title>
<meta name=keywords content><meta name=description content="There&rsquo;s something I feel like I need to acknowledge around my maintainership of spf13/cobra.
During my time at AWS, I had a really hard time contributing to open source projects that were important to me (and important to the broader ecosystem). I didn&rsquo;t have the energy, but more importantly, I didn&rsquo;t have the bandwidth.
There&rsquo;s alot of red tape to get through when it comes to open source at Amazon. After all, AWS alone is a massive business unit with thousands of products and tens of thousands of engineers all around the world."><meta name=author content><link rel=canonical href=https://johncodes.com/posts/2023/06-29-on-maintaining-cobra/><link crossorigin=anonymous href=/assets/css/stylesheet.9329d037bc79464b26647fb72e079cd738f5d2418b1df4da3b515db9e22cb4d9.css integrity="sha256-kynQN7x5RksmZH+3Lgec1zj10kGLHfTaO1FdueIstNk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://johncodes.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://johncodes.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://johncodes.com/favicon-32x32.png><link rel=apple-touch-icon href=https://johncodes.com/apple-touch-icon.png><link rel=mask-icon href=https://johncodes.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="On maintaining spf13/cobra"><meta property="og:description" content="There&rsquo;s something I feel like I need to acknowledge around my maintainership of spf13/cobra.
During my time at AWS, I had a really hard time contributing to open source projects that were important to me (and important to the broader ecosystem). I didn&rsquo;t have the energy, but more importantly, I didn&rsquo;t have the bandwidth.
There&rsquo;s alot of red tape to get through when it comes to open source at Amazon. After all, AWS alone is a massive business unit with thousands of products and tens of thousands of engineers all around the world."><meta property="og:type" content="article"><meta property="og:url" content="https://johncodes.com/posts/2023/06-29-on-maintaining-cobra/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-29T00:00:00+00:00"><meta property="article:modified_time" content="2023-06-29T00:00:00+00:00"><meta property="og:site_name" content="John-McBride"><meta name=twitter:card content="summary"><meta name=twitter:title content="On maintaining spf13/cobra"><meta name=twitter:description content="There&rsquo;s something I feel like I need to acknowledge around my maintainership of spf13/cobra.
During my time at AWS, I had a really hard time contributing to open source projects that were important to me (and important to the broader ecosystem). I didn&rsquo;t have the energy, but more importantly, I didn&rsquo;t have the bandwidth.
There&rsquo;s alot of red tape to get through when it comes to open source at Amazon. After all, AWS alone is a massive business unit with thousands of products and tens of thousands of engineers all around the world."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://johncodes.com/posts/"},{"@type":"ListItem","position":2,"name":"On maintaining spf13/cobra","item":"https://johncodes.com/posts/2023/06-29-on-maintaining-cobra/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"On maintaining spf13/cobra","name":"On maintaining spf13\/cobra","description":"There\u0026rsquo;s something I feel like I need to acknowledge around my maintainership of spf13/cobra.\nDuring my time at AWS, I had a really hard time contributing to open source projects that were important to me (and important to the broader ecosystem). I didn\u0026rsquo;t have the energy, but more importantly, I didn\u0026rsquo;t have the bandwidth.\nThere\u0026rsquo;s alot of red tape to get through when it comes to open source at Amazon. After all, AWS alone is a massive business unit with thousands of products and tens of thousands of engineers all around the world.","keywords":[],"articleBody":"There’s something I feel like I need to acknowledge around my maintainership of spf13/cobra.\nDuring my time at AWS, I had a really hard time contributing to open source projects that were important to me (and important to the broader ecosystem). I didn’t have the energy, but more importantly, I didn’t have the bandwidth.\nThere’s alot of red tape to get through when it comes to open source at Amazon. After all, AWS alone is a massive business unit with thousands of products and tens of thousands of engineers all around the world.\nAnd I totally get it: there’s legal \u0026 licensing considerations, there’s staffing calculations, there’s non-competes, there’s product commitments, there’s other competing companies working on the same projects in the open source, etc. etc. All this leaves very little room for individual contributors to give back to the community where they have the autonomy and the power to do so.\nEventually, I did get the “all clear” to work on cobra, but I wasn’t given any flexibility to find time to maintain the project. Which was fine. I wasn’t hired to work on cobra. And it’s more or less always been a “bonus” thing I’ve worked on.\nBut it really pained me to not be able to dedicate some time to an important project within the Cloud Native and Kubernetes ecosystem. In the last 3 months alone, cobra’s PR velocity has crawled to a standstill, there have been only a few merged PRs, and we’ve neglected to keep up with triaging new issues.\nspf13/cobra is abit of a weird project (at least from an “enterprise open source office” perspective). It’s a code library with basically no way to “product-ize” it. It gives you the Go APIs and frameworks to build modern and elegant command line interfaces. It’s one of those deep dependencies that can go unnoticed for years until something goes terribly wrong but in itself, it isn’t anything you can give to people; you must build on top of it.\nI tried my best to pitch my case to get some amount of allocation into the project. But no luck. Maybe it was the economy, maybe it was the layoffs, I’m really not sure. Regardless, my allocation didn’t change. Whenever I’ve tried to explain to a product manager, an engineering manager, or a business person why leaving cobra to rot risks our entire secure software supply chain, I’m often met with blank stares. “Why work on a CLI framework when you should be working on products?” or “This doesn’t seem critical to our bottom line.”\nCompare that to something like core Kubernetes (which in itself uses cobra), a platform for running and managing containerized workloads and services in the cloud. Now that sounds like a product you can ship! You can easily see how AWS justifies having entire teams allocated to maintaining upstream open source projects, like Kubernetes, when the wellness and maintenance of those projects directly correlates to the bottom line of a product.\nBut spf13/cobra is used throughout several important AWS led open source projects. Just to name a few:\ncontainerd’s nerdctl finch eksctl the copilot CLI Maybe the “engineering allocation chain” only goes one or two layers deep. Not deep enough to notice a dependency like cobra and its lack of maintenance.\nIn 2022, I gave a talk at KubeCon EU about maintaining cobra with a very small group, what the “solo” maintainer experience is like, and why solo maintainer projects are incredibly dangerous to the wellness of the entire ecosystem and broader secure software supply-chain.\nI think about that talk alot. And it keeps me up at night sometimes: what would it take for a bad actor to hack my GitHub account and inject some malicious dependency into cobra (therefore poisoning the dependencies in Kubernetes, Helm, Istio, Linkerd, Docker, etc. etc.). How long before people would notice? How much damage would be done, even in a short amount of time?\nI sort of feel like I’ve let the cobra and Kubernetes community down. And I feel like I’ve become the exact sort of open source maintainer that I cautioned against in that talk: distant, difficult to reach, not engaging with the community, jaded, burned out. But I know it all doesn’t rest on my shoulders: there are other people in the community that keep very close eyes on cobra. I care deeply about the security and well-being of this project, but it’s clear to me (and probably to you too) that I need a break.\nSo, what does all this mean for my work on cobra?\nWell, thankfully, I’ve found a breath of fresh air now working with a small team at OpenSauced.\nAnd, this summer, while I ramp up with the new job, I plan to continue to maintain cobra, but I’m going to take some time away from some of these open source responsibilities. I think this will give me the rest I need to approach cobra and other projects with a renewed sense of purpose latter this summer.\nI’m taking a trip to Iceland this month where I’ll unplug, read a few books, take some pictures with my camera, and forget about the world of the secure software supply-chain.\nUntil then, happy building!\nIf you found this blog post valuable, comment below, subscribe to future posts via RSS, or buy me a coffee via GitHub sponsors.\n","wordCount":"896","inLanguage":"en","datePublished":"2023-06-29T00:00:00Z","dateModified":"2023-06-29T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://johncodes.com/posts/2023/06-29-on-maintaining-cobra/"},"publisher":{"@type":"Organization","name":"John McBride","logo":{"@type":"ImageObject","url":"https://johncodes.com/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://johncodes.com/ accesskey=h title="John McBride (Alt + H)">John McBride</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://johncodes.com/archives title=Writing><span>Writing</span></a></li><li><a href=https://johncodes.com/index.xml title=RSS><span>RSS</span></a></li><li><a href=https://johncodes.com/talks/ title=Talks><span>Talks</span></a></li><li><a href=https://johncodes.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://johncodes.com/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>On maintaining spf13/cobra</h1><div class=post-meta><span title='2023-06-29 00:00:00 +0000 UTC'>June 29, 2023</span></div></header><div class=post-content><p>There&rsquo;s something I feel like I need to acknowledge
around <a href=https://github.com/spf13/cobra>my maintainership of</a>
spf13/cobra.</p><p>During my time at AWS, I had a <em>really</em> hard time contributing to open source
projects that were important to me (and important to the broader ecosystem).
I didn&rsquo;t have the energy, but more importantly, I didn&rsquo;t have the bandwidth.</p><p>There&rsquo;s alot of red tape to get through when it comes to open source at Amazon.
After all, AWS alone is a massive business unit with thousands of products
and tens of thousands of engineers all around the world.</p><p>And I totally get it: there&rsquo;s legal & licensing considerations,
there&rsquo;s staffing calculations, there&rsquo;s non-competes, there&rsquo;s product commitments,
there&rsquo;s other competing companies working on the same projects in the open source, etc. etc.
All this leaves very little room for individual contributors to give back to the community
where they have the autonomy and the power to do so.</p><p>Eventually, I did get the <em>&ldquo;all clear&rdquo;</em> to work on cobra, but I wasn&rsquo;t given any flexibility
to find time to maintain the project.
Which was fine. I wasn&rsquo;t hired to work on cobra. And it&rsquo;s more or less always been
a &ldquo;bonus&rdquo; thing I&rsquo;ve worked on.</p><p>But it really pained me to not be able to dedicate <em>some</em> time to an important project
within the Cloud Native and Kubernetes ecosystem.
In the last 3 months alone, <a href=https://insights.opensauced.pizza/pages/jpmcb/363/dashboard>cobra&rsquo;s PR velocity has crawled to a standstill</a>,
there have been only a few merged PRs,
and we&rsquo;ve neglected to keep up with triaging new issues.</p><p><code>spf13/cobra</code> is abit of a weird project (at least from an <em>&ldquo;enterprise open source office&rdquo;</em> perspective).
It&rsquo;s a code library with basically no way to <em>&ldquo;product-ize&rdquo;</em> it.
It gives you the Go APIs and frameworks to build modern and elegant command line interfaces.
It&rsquo;s one of those deep dependencies that can go unnoticed for years until something goes terribly wrong
but in itself, it isn&rsquo;t anything you can give to people; you must build on top of it.</p><p>I tried my best to pitch my case to get some amount of allocation into the project.
But no luck. Maybe it was the economy, maybe it was the layoffs, I&rsquo;m really not sure.
Regardless, my allocation didn&rsquo;t change.
Whenever I&rsquo;ve tried to explain to a product manager, an engineering manager, or a business person
why leaving cobra to rot risks our entire secure software supply chain,
I&rsquo;m often met with blank stares.
<em>&ldquo;Why work on a CLI framework when you should be working on products?&rdquo;</em>
or
<em>&ldquo;This doesn&rsquo;t seem critical to our bottom line.&rdquo;</em></p><p>Compare that to something like core Kubernetes (<a href=https://github.com/kubernetes/kubernetes/blob/c78204dc06d5b0bc02fc2f6bb7dbf98552180d26/go.mod#L62><em>which in itself uses cobra</em></a>),
a platform for running and managing containerized workloads and services in the cloud.
Now <em>that</em> sounds like a product you can ship!
You can easily see how AWS justifies having entire teams allocated to maintaining upstream open source projects, like Kubernetes,
when the wellness and maintenance of those projects directly correlates to the bottom line of a product.</p><p>But <code>spf13/cobra</code> is used <em>throughout</em> several important AWS led open source projects.
Just to name a few:</p><ul><li><a href=https://github.com/containerd/nerdctl/blob/29fd529c8a684be58c67c052b4842221542212a7/go.mod#L48>containerd&rsquo;s nerdctl</a></li><li><a href=https://github.com/runfinch/finch/blob/f7e091670fb2ac5377423e72f98aa8be33aa41c8/go.mod#L18>finch</a></li><li><a href=https://github.com/weaveworks/eksctl/blob/dce1ef8f39223db7ab45419eac0c9b1fdaea7a44/go.mod#L61>eksctl</a></li><li><a href=https://github.com/aws/copilot-cli/blob/5b6f75d457bff8d13563fb6034c5d3b9ce157e39/go.mod#L22>the copilot CLI</a></li></ul><p>Maybe the <em>&ldquo;engineering allocation chain&rdquo;</em> only goes one or two layers deep.
Not deep enough to notice a dependency like cobra and its lack of maintenance.</p><p>In 2022, I gave a talk at KubeCon EU about maintaining cobra with a very small group,
what the &ldquo;solo&rdquo; maintainer experience is like, and why solo maintainer projects are incredibly dangerous
to the wellness of the entire ecosystem and broader secure software supply-chain.</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/YBsDnXXW_d8 style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><hr><p>I think about that talk alot.
And it keeps me up at night sometimes:
what would it take for a bad actor to hack my GitHub account and inject some
malicious dependency into cobra (therefore poisoning the dependencies in
<a href=https://johncodes.com/posts/2023/06-13-goodbye-aws/>Kubernetes</a>,
<a href=https://github.com/helm/helm/blob/03911aeab78290394e589cf7705d3fd542a236c9/go.mod#L32>Helm</a>,
<a href=https://github.com/istio/istio/blob/36e6875994e53ddb28e86d6a5f13b56ca15a41d3/go.mod#L75>Istio</a>,
<a href=https://github.com/linkerd/linkerd2/blob/18755e45cc590c590eedcfa3d30ade09c8b8e7e1/go.mod#L35>Linkerd</a>,
<a href=https://github.com/docker/cli/blob/d2b376da9256df7d1d0c1fc310db621bd18dc21b/vendor.mod#L35>Docker</a>, etc. etc.).
How long before people would notice?
How much damage would be done, even in a short amount of time?</p><p>I sort of feel like I&rsquo;ve let the cobra and Kubernetes community down.
And I feel like I&rsquo;ve become the exact sort of open source maintainer that I cautioned against in that talk:
<em>distant, difficult to reach, not engaging with the community, jaded, burned out.</em>
But I know it all doesn&rsquo;t rest on my shoulders: there are other people
in the community that keep very close eyes on cobra.
I care deeply about the security and well-being of this project,
but it&rsquo;s clear to me (and probably to you too) that I need a break.</p><p>So, what does all this mean for my work on cobra?</p><p>Well, thankfully, <a href=https://johncodes.com/posts/2023/06-13-goodbye-aws/>I&rsquo;ve found a breath of fresh air</a>
now working with a small team at <a href=https://opensauced.pizza/>OpenSauced</a>.</p><p>And, this summer, while I ramp up with the new job,
I plan to continue to maintain cobra,
but I&rsquo;m going to take some time away from some of these open source responsibilities.
I think this will give me the rest I need to approach cobra and other projects
with a renewed sense of purpose latter this summer.</p><p>I&rsquo;m taking a trip to Iceland this month where I&rsquo;ll unplug,
read a few books, take some pictures with my camera,
and forget about the world of the secure software supply-chain.</p><p>Until then, happy building!</p><hr><p>If you found this blog post valuable, comment below,
<a href=https://johncodes.com/index.xml>subscribe to future posts via RSS</a>,
or <a href=https://github.com/sponsors/jpmcb>buy me a coffee via GitHub sponsors.</a></p><hr><script src=https://giscus.app/client.js data-repo=jpmcb/blog data-repo-id="MDEwOlJlcG9zaXRvcnkxMTYxODMyNjg=" data-category="Blog comments" data-category-id=DIC_kwDOBuzQ5M4CTbHW data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=dark_dimmed data-lang=en data-loading=lazy crossorigin=anonymous async></script></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://johncodes.com/>John McBride</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>