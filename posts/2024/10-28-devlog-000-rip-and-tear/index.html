<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Devlog 000 - rip-and-tear.nvim | John McBride</title><meta name=keywords content><meta name=description content="
      
    


This is probably one of the stupidest Neovim plugins I&rsquo;ve built.
And I&rsquo;m having a ton of fun doing it.
rip-and-tear.nvim is a super-not-serious Neovim plugin that plays a configured mp3 when you&rsquo;re typing in the editor. The original idea, like so many great hacker scenes in movies, was to have an epic soundtrack starts playing as you engaged your mad Neovim skills."><meta name=author content><link rel=canonical href=https://johncodes.com/posts/2024/10-28-devlog-000-rip-and-tear/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://johncodes.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://johncodes.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://johncodes.com/favicon-32x32.png><link rel=apple-touch-icon href=https://johncodes.com/apple-touch-icon.png><link rel=mask-icon href=https://johncodes.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://johncodes.com/posts/2024/10-28-devlog-000-rip-and-tear/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Devlog 000 - rip-and-tear.nvim"><meta property="og:description" content="
      
    


This is probably one of the stupidest Neovim plugins I&rsquo;ve built.
And I&rsquo;m having a ton of fun doing it.
rip-and-tear.nvim is a super-not-serious Neovim plugin that plays a configured mp3 when you&rsquo;re typing in the editor. The original idea, like so many great hacker scenes in movies, was to have an epic soundtrack starts playing as you engaged your mad Neovim skills."><meta property="og:type" content="article"><meta property="og:url" content="https://johncodes.com/posts/2024/10-28-devlog-000-rip-and-tear/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-10-28T10:00:00-06:00"><meta property="article:modified_time" content="2024-10-28T10:00:00-06:00"><meta property="og:site_name" content="John-McBride"><meta name=twitter:card content="summary"><meta name=twitter:title content="Devlog 000 - rip-and-tear.nvim"><meta name=twitter:description content="
      
    


This is probably one of the stupidest Neovim plugins I&rsquo;ve built.
And I&rsquo;m having a ton of fun doing it.
rip-and-tear.nvim is a super-not-serious Neovim plugin that plays a configured mp3 when you&rsquo;re typing in the editor. The original idea, like so many great hacker scenes in movies, was to have an epic soundtrack starts playing as you engaged your mad Neovim skills."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://johncodes.com/posts/"},{"@type":"ListItem","position":2,"name":"Devlog 000 - rip-and-tear.nvim","item":"https://johncodes.com/posts/2024/10-28-devlog-000-rip-and-tear/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Devlog 000 - rip-and-tear.nvim","name":"Devlog 000 - rip-and-tear.nvim","description":" This is probably one of the stupidest Neovim plugins I\u0026rsquo;ve built.\nAnd I\u0026rsquo;m having a ton of fun doing it.\nrip-and-tear.nvim is a super-not-serious Neovim plugin that plays a configured mp3 when you\u0026rsquo;re typing in the editor. The original idea, like so many great hacker scenes in movies, was to have an epic soundtrack starts playing as you engaged your mad Neovim skills.\n","keywords":[],"articleBody":" This is probably one of the stupidest Neovim plugins I’ve built.\nAnd I’m having a ton of fun doing it.\nrip-and-tear.nvim is a super-not-serious Neovim plugin that plays a configured mp3 when you’re typing in the editor. The original idea, like so many great hacker scenes in movies, was to have an epic soundtrack starts playing as you engaged your mad Neovim skills.\nSomething akin to a Mr. Robot scene:\n“Rip and Tear” is one of the title tracks for the 2016 Doom game; a chugy, heavy metal song that really gets you amped up. It felt like an appropriate name for a plugin intended for egregious hype and motivation. And “I. Dogma” from the game, a preamble about the Doomslayer, seemed to fit how using Neovim sometimes feels:\nIn the first age\nIn the first battle\nWhen the bloatware first lengthened\nOne stood\nHe chose the path of perpetual torment\nIn his ravenous configurations he found no peace\nAnd with boiling blood he scoured the internet\nSeeking vengeance against the VScoders who had wronged him\nAnd those that tasted the bite of his keyboard bindings named him\nThe Neovimer.\nHow the plugin works Upon installing the plugin, in your Neovim configs, the following map can be passed in:\nrequire('rip-and-tear').setup({ mp3_file = '/Users/jpmcb/Downloads/rip-and-tear.mp3' }) For obvious legal reasons, I couldn’t include rip-and-tear.mp3 in the plugin or git repo itself, so that piece is left up to an end user: you must provide the full path to an mp3 file in the mp3_file field which will play during typing.\nYou can also pass in player_command to denote which system mp3 player should be used and delay to configure how long to wait before starting a song as you’re typing. The default player is mpg123 so end users need to have that installed to get this plugin to work (easily installable via brew install mpg123). In the future, I hope to incorporate other system players.\nDetecting keypresses Neovim provides a handy way to handle when a key is pressed via vim.on_key:\nvim.on_key(on_key_function, nvim_namespace_id) In this arbitrary example, on_key_function is a defined function that takes a char (the key that was pressed) and performs some action: in our case, play the mp3. We don’t need the char that was pressed, so we effectively ignore it. This API utility then maps our function to the system loop enabling us to capture every key press every time.\nThe nvim_namespace_id is the integer ID of a Neovim namespace (which can be useful for separating buffer highlights or other plugin specific entities).\nManaging process state By default, the plugin uses mpg123 to play an mp3 file. We can execute that utility like so:\nlocal mp3_process = nil local cmd = 'mpg123' local args = {'--loop', '-1', mp3_file} mp3_process = vim.fn.jobstart({cmd, unpack(args)}, {detach = true}) vim.fn.jobstart is apart of Neovim’s broader “job control” schematic: it allows for plugins and users to control multiple jobs and tasks within Neovim without blocking the current editor instance. It’s a great way to perform and manage background tasks or launch CLI tools. And it’s what allows you to continue to type in your Neovim editor without having to wait for mpg123 to finish executing.\nThe mp3_process gets assigned a “job ID” which is a Neovim managed identifying integer for that specific job running within that Neovim session. Importantly, this is not the actual system’s process ID.\nAnd you might be saying “John! Why not use vim.system! It’s so much better!” True, vim.system is preferred for running system commands and has built in asynchronous mechanics for running this type of background task without having to deal with Neovim managed job IDs. vim.system will even return to you a vim.SystemObj which has a PID integer for the real system process, not a job managed by Neovim.\nWell, I’m lazy.\nAnd for a small, silly proof of concept plugin, it stands to reason that I wouldn’t spend abunch of precious time trying to get asyncrounous Lua within Neovim to work! jobstart is great for a quick and dirty processes spawning. Despite its drawbacks, it is simple and easy to work with compared to vim.system.\nUsing timers Neovim also includes some awesome timer utilities which makes stopping the mp3 when no keypress has occurred a breeze:\ntimer = vim.loop.new_timer() timer:start(configured_delay, vim.schedule_wrap(function() stop_mp3() timer:stop() end)) This little mechanism makes it simple to integrate with the Neovim event-loop and kick off a timer that will fire an async function when the configured delay is reached. We can always reset the timer if typing continues since we are capturing every keystroke.\nThis gives that continuous hype “feel” I was going for that will continue to play the mp3 only as long as you’re typing or hitting keys.\nRough edges But there are definitely still some big bugs to iron out.\nFor example, if you’re typing, the song starts playing, and then you exit Neovim (with something like :q or ZZ) without waiting for the song to stop (because you stopped typing) the mp3_process doesn’t get reaped or cleaned up. The song just keeps playing in the background. Worst case, you go back into Neovim and start typing to only have another mp3_process kick off too, overlapping the first.\nYou can imagine the headaches this can cause an end user.\nAnd to play devil’s advocate to my own point, utilizing vim.system and reaping any of the PIDs on exit / cleanup would likely be a more elegant solution to this.\nI’d also like to include the capability to play a whole directory of mp3s, not just a single file. The same song over and over again can get very annoying.\nCheck out the plugin for yourself, and god speed: https://github.com/jpmcb/rip-and-tear.nvim\n","wordCount":"950","inLanguage":"en","datePublished":"2024-10-28T10:00:00-06:00","dateModified":"2024-10-28T10:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://johncodes.com/posts/2024/10-28-devlog-000-rip-and-tear/"},"publisher":{"@type":"Organization","name":"John McBride","logo":{"@type":"ImageObject","url":"https://johncodes.com/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://johncodes.com/ accesskey=h title="John McBride (Alt + H)">John McBride</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://johncodes.com/archives title=Writing><span>Writing</span></a></li><li><a href=https://johncodes.com/index.xml title=RSS><span>RSS</span></a></li><li><a href=https://johncodes.com/talks/ title=Talks><span>Talks</span></a></li><li><a href=https://johncodes.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://johncodes.com/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Devlog 000 - rip-and-tear.nvim</h1><div class=post-meta><span title='2024-10-28 10:00:00 -0600 -0600'>October 28, 2024</span></div></header><div class=post-content><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/vU2Gj40v9II?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><hr><p>This is probably one of the stupidest Neovim plugins I&rsquo;ve built.</p><p>And I&rsquo;m having a ton of fun doing it.</p><p><a href=https://github.com/jpmcb/rip-and-tear.nvim><code>rip-and-tear.nvim</code></a> is a super-not-serious Neovim plugin that plays a configured mp3 when you&rsquo;re typing in the editor. The original idea, like so many great hacker scenes in movies, was to have an epic soundtrack starts playing as you engaged your mad Neovim skills.</p><p>Something akin to a Mr. Robot scene:</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/67gYEK4FtzA?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><hr><p><a href="https://www.youtube.com/watch?v=vyA1z2A-lhU&pp=ygUMcmlwIGFuZCB0ZWFy">&ldquo;Rip and Tear&rdquo;</a> is one of the title tracks for the 2016 Doom game; a chugy, heavy metal song that really gets you amped up. It felt like an appropriate name for a plugin intended for egregious hype and motivation. And <em>&ldquo;I. Dogma&rdquo;</em> from the game, a preamble about the Doomslayer, seemed to fit how using Neovim sometimes feels:</p><p><em>In the first age</em><br><em>In the first battle</em><br><em>When the bloatware first lengthened</em><br><em>One stood</em></p><p><em>He chose the path of perpetual torment</em><br><em>In his ravenous configurations he found no peace</em><br><em>And with boiling blood he scoured the internet</em><br><em>Seeking vengeance against the VScoders who had wronged him</em></p><p><em>And those that tasted the bite of his keyboard bindings named him</em><br><em>The Neovimer.</em></p><h2 id=how-the-plugin-works>How the plugin works<a hidden class=anchor aria-hidden=true href=#how-the-plugin-works>#</a></h2><p>Upon installing the plugin, in your Neovim configs, the following map can be passed in:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>require(<span style=color:#e6db74>&#39;rip-and-tear&#39;</span>).setup({
</span></span><span style=display:flex><span>    mp3_file <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;/Users/jpmcb/Downloads/rip-and-tear.mp3&#39;</span>
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>For obvious legal reasons, I couldn&rsquo;t include <code>rip-and-tear.mp3</code> in the plugin or git repo itself, so that piece is left up to an end user: you must provide the full path to an mp3 file in the <code>mp3_file</code> field which will play during typing.</p><p>You can also pass in <code>player_command</code> to denote which system mp3 player should be used and <code>delay</code> to configure how long to wait before starting a song as you&rsquo;re typing. The default player is <code>mpg123</code> so end users need to have that installed to get this plugin to work (easily installable via <code>brew install mpg123</code>). In the future, I hope to incorporate other system players.</p><h2 id=detecting-keypresses>Detecting keypresses<a hidden class=anchor aria-hidden=true href=#detecting-keypresses>#</a></h2><p>Neovim provides a handy way to handle when a key is pressed via <a href=https://neovim.io/doc/user/lua.html#vim.on_key()><code>vim.on_key</code></a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>vim.on_key(on_key_function, nvim_namespace_id)
</span></span></code></pre></div><p>In this arbitrary example, <code>on_key_function</code> is a defined function that takes a char (the key that was pressed) and performs some action: in our case, play the mp3. We don&rsquo;t need the char that was pressed, so we effectively ignore it. This API utility then maps our function to the system loop enabling us to capture every key press every time.</p><p>The <code>nvim_namespace_id</code> is the integer ID of a Neovim namespace (which can be useful for separating buffer highlights or other plugin specific entities).</p><h2 id=managing-process-state>Managing process state<a hidden class=anchor aria-hidden=true href=#managing-process-state>#</a></h2><p>By default, the plugin uses <code>mpg123</code> to play an mp3 file. We can execute that utility like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>local</span> mp3_process <span style=color:#f92672>=</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>local</span> cmd <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;mpg123&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>local</span> args <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;--loop&#39;</span>, <span style=color:#e6db74>&#39;-1&#39;</span>, mp3_file}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mp3_process <span style=color:#f92672>=</span> vim.fn.jobstart({cmd, unpack(args)}, {detach <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>})
</span></span></code></pre></div><p><a href=https://neovim.io/doc/user/builtin.html#jobstart()><code>vim.fn.jobstart</code></a> is apart of Neovim&rsquo;s broader &ldquo;job control&rdquo; schematic: it allows for plugins and users to control multiple jobs and tasks within Neovim without blocking the current editor instance. It&rsquo;s a great way to perform and manage background tasks or launch CLI tools. And it&rsquo;s what allows you to continue to type in your Neovim editor without having to wait for <code>mpg123</code> to finish executing.</p><p>The <code>mp3_process</code> gets assigned a &ldquo;job ID&rdquo; which is a Neovim managed identifying integer for that specific job running within that Neovim session. Importantly, this is <em>not</em> the actual system&rsquo;s process ID.</p><p>And you might be saying <em>&ldquo;John! Why not use <a href=https://neovim.io/doc/user/lua.html#vim.system()><code>vim.system</code></a>! It&rsquo;s so much better!&rdquo;</em> True, <code>vim.system</code> is preferred for running system commands and has built in asynchronous mechanics for running this type of background task without having to deal with Neovim managed job IDs. <code>vim.system</code> will even return to you a <code>vim.SystemObj</code> which has a PID integer for the real system process, not a job managed by Neovim.</p><p>Well, I&rsquo;m lazy.</p><p>And for a small, silly proof of concept plugin, it stands to reason that I wouldn&rsquo;t spend abunch of precious time trying to get asyncrounous Lua within Neovim to work! <code>jobstart</code> is great for a quick and dirty processes spawning. Despite its drawbacks, it is simple and easy to work with compared to <code>vim.system</code>.</p><h2 id=using-timers>Using timers<a hidden class=anchor aria-hidden=true href=#using-timers>#</a></h2><p>Neovim also includes some awesome timer utilities which makes stopping the mp3 when no keypress has occurred a breeze:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>timer <span style=color:#f92672>=</span> vim.loop.new_timer()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>timer:start(configured_delay, vim.schedule_wrap(<span style=color:#66d9ef>function</span>()
</span></span><span style=display:flex><span>  stop_mp3()
</span></span><span style=display:flex><span>  timer:stop()
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>))
</span></span></code></pre></div><p>This little mechanism makes it simple to integrate with <a href=https://neovim.io/doc/user/luvref.html#luv-event-loop>the Neovim event-loop</a> and kick off a timer that will fire an async function when the configured delay is reached. We can always reset the timer if typing continues since we are capturing every keystroke.</p><p>This gives that continuous hype &ldquo;feel&rdquo; I was going for that will continue to play the mp3 only as long as you&rsquo;re typing or hitting keys.</p><h2 id=rough-edges>Rough edges<a hidden class=anchor aria-hidden=true href=#rough-edges>#</a></h2><p>But there are definitely still some big bugs to iron out.</p><p>For example, if you&rsquo;re typing, the song starts playing, and then you exit Neovim (with something like <code>:q</code> or <code>ZZ</code>) without waiting for the song to stop (because you stopped typing) the <code>mp3_process</code> doesn&rsquo;t get reaped or cleaned up. The song just keeps playing in the background. Worst case, you go <em>back</em> into Neovim and start typing to only have <em>another</em> <code>mp3_process</code> kick off too, overlapping the first.</p><p>You can imagine the headaches this can cause an end user.</p><p>And to play devil&rsquo;s advocate to my own point, utilizing <code>vim.system</code> and reaping any of the PIDs on exit / cleanup would likely be a more elegant solution to this.</p><p>I&rsquo;d also like to include the capability to play a whole directory of mp3s, not just a single file. The same song over and over again can get very annoying.</p><p>Check out the plugin for yourself, and god speed: <a href=https://github.com/jpmcb/rip-and-tear.nvim>https://github.com/jpmcb/rip-and-tear.nvim</a></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://johncodes.com/>John McBride</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>